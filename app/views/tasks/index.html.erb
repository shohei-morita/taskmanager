<h1><%= t('view.index_title') %></h1>
<%= link_to "タスク登録", new_task_path %>
<%= link_to "終了期限でソートする", tasks_path(sort_expired: "true") %>
<%= link_to "優先順位でソートする", tasks_path(sort_priority: "true") %>

<%= form_with(url: tasks_path, method: :get, local: true) do |f| %>
  <%= f.label :"タスク検索" %>
  <%= f.text_field :theme, id: "theme_search" %>
  <%= f.label :"ステータス検索" %>
  <%= f.select :status, selection_from_enum(Task, :status), include_blank: :true %>
  <%= f.hidden_field :search, value: "true" %>
  <%= f.submit "検索", name: nil, id: "exec_search" %>
<% end %>


<table>
  <thead>
    <tr>
      <th><%= t('view.theme') %></th>
      <th><%= t('view.content') %></th>
      <th><%= t('view.priority') %></th>
      <th><%= t('view.status') %></th>
      <th><%= t('view.time_limit') %></th>
      <th><%= t('view.post_time') %></th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @tasks.each do |task| %>
    <tr>
      <td class="task_row" ><%= task.theme %></td>
      <td><%= task.content %></td>
      <td class="priority_row"><%= t("view.#{task.priority}") %></td>
      <td class="status_row"><%= t("view.#{task.status}") %></td>
      <td><%= task.time_limit %></td>
      <td><%= task.created_at.strftime("%Y/%m/%d") %></td>
      <td><%= link_to "詳細", task_path(task.id) %></td>
      <td><%= link_to "編集", edit_task_path(task.id) %></td>
      <td><%= link_to "削除", task_path(task.id), method: :delete, data: { confirm: "本当に削除しますか" } %></td>
    </tr>
    <% end %>
  </tbody>
<table>
